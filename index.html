<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>–î–µ–ª–æ –æ –°—á–∞—Å—Ç—å–µ ‚Äî –°–ø–æ—Ä –ê–ª—É–∞ vs –ù—É—Ä–∞–ª–∏</title>
<meta name="description" content="–ò–≥—Ä–æ–≤–æ–µ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ: —Å–ø–æ—Ä –ê–ª—É–∞ vs –ù—É—Ä–∞–ª–∏ –ø–æ–¥ –ø—Ä–∏—Å–º–æ—Ç—Ä–æ–º –°—É–¥—å–∏. –ü–æ–±–µ–¥–∞ ‚Äî —ç—Ç–æ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ –ø–æ–¥–∞—Ä–æ–∫ ‚ù§Ô∏è">
<link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@600&family=Inter:wght@400;600&display=swap" rel="stylesheet">
<link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='64' width='64'%3E%3Ctext y='48' x='6' font-size='48'%3E‚öñÔ∏è%3C/text%3E%3C/svg%3E">
<style>
  :root{
    --ink:#182435; --muted:#5c6a79; --line:#e4e9ef; --bg:#f7f9fb;
    --brand:#0b6cff; --ok:#2ea44f; --warn:#ffaf38; --bad:#e45757;
  }
  *{box-sizing:border-box}
  body{margin:0;background:linear-gradient(#fdfcf9,var(--bg));color:var(--ink);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
  .wrap{max-width:960px;margin:32px auto;padding:0 16px}
  header.card{text-align:center}
  h1{font-family:Merriweather,serif;margin:0 0 6px}
  .lead{color:var(--muted);margin:0 0 18px}
  .card{background:#fff;border:1px solid var(--line);border-radius:14px;box-shadow:0 10px 26px rgba(18,38,63,.06);padding:18px}
  .row{display:flex;gap:10px;flex-wrap:wrap}
  .btn{appearance:none;border:0;background:var(--brand);color:#fff;padding:12px 18px;border-radius:10px;font-weight:600;cursor:pointer;transition:.18s;box-shadow:0 6px 18px rgba(11,108,255,.18)}
  .btn:hover{transform:translateY(-1px)}
  .btn.ghost{background:#fff;color:var(--brand);border:1.5px solid var(--brand);box-shadow:none}
  .btn.warn{background:var(--warn);color:#1b1405}
  .btn.success{background:var(--ok)}
  .btn.bad{background:var(--bad)}
  .hint{color:var(--muted);font-size:.95rem}
  .divider{height:1px;background:var(--line);margin:14px 0}
  .scene{display:none}
  .scene.active{display:block;animation:fade .3s ease}
  @keyframes fade{from{opacity:0;transform:translateY(6px)} to{opacity:1;transform:translateY(0)}}
  .progress{height:12px;background:#eef2f7;border:1px solid var(--line);border-radius:999px;overflow:hidden}
  .bar{height:100%;width:0;background:linear-gradient(90deg,var(--brand),#43a1ff);transition:width .45s ease}
  .judge, .log{background:#fff;border:1px solid var(--line);border-radius:12px;padding:12px}
  .say{padding:8px 10px;border-left:3px solid #dde4ec;border-radius:8px;margin:6px 0}
  .role{font-weight:700;margin-right:6px;color:#0b3b6c}
  .choices{display:grid;grid-template-columns:repeat(1,minmax(220px,1fr));gap:10px}
  @media (min-width:720px){ .choices{grid-template-columns:repeat(3,1fr)} }
  .choice{border:1.5px solid var(--line);border-radius:12px;padding:12px;background:#fff;cursor:pointer;transition:.15s;text-align:left}
  .choice:hover{transform:translateY(-1px)}
  .choice.good{border-color:var(--ok);background:#f1fbf4}
  .choice.bad{border-color:#ffd6d6;background:#fff7f7}
  .toast{position:fixed;left:50%;bottom:24px;transform:translateX(-50%);background:#0f172a;color:#fff;padding:10px 14px;border-radius:10px;box-shadow:0 6px 18px rgba(0,0,0,.25);font-size:.95rem;z-index:999;opacity:0}
  .type{white-space:pre-wrap;line-height:1.6;margin-top:12px}
  /* —Å–µ—Ä–¥–µ—á–∫–∏ */
  .heart{position:fixed;bottom:-40px;font-size:22px;animation:float 6s linear forwards;pointer-events:none}
  @keyframes float{from{transform:translateY(0)} to{transform:translateY(-120vh)}}
</style>
</head>
<body>
<div class="wrap">
  <header class="card">
    <h1>–î–µ–ª–æ –æ —Å—á–∞—Å—Ç—å–µ</h1>
    <p class="lead">–°–ø–æ—Ä <b>–ê–ª—É–∞</b> vs <b>–ù—É—Ä–∞–ª–∏</b> –ø–æ–¥ –Ω–∞–¥–∑–æ—Ä–æ–º –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–≥–æ –°—É–¥—å–∏</p>
    <div class="progress" aria-label="–ü—Ä–æ–≥—Ä–µ—Å—Å –¥–µ–ª–∞">
      <div id="bar" class="bar"></div>
    </div>
    <div style="height:12px"></div>
    <div class="row" style="justify-content:center">
      <button id="startBtn" class="btn">–ù–∞—á–∞—Ç—å —Å–ø–æ—Ä</button>
      <button id="bribeBtn" class="btn warn" title="–ö–æ—Ñ–µ –°—É–¥—å–µ –∏ –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç üòâ" style="display:none">–ü–æ–¥–∫—É–ø–∏—Ç—å —Å—É–¥—å—é ‚òï</button>
    </div>
  </header>

  <!-- –°–¶–ï–ù–ê 1: –≤—Å—Ç—É–ø–ª–µ–Ω–∏–µ -->
  <section id="s1" class="scene active">
    <div class="card">
      <div class="log" id="log1" aria-live="polite">
        <div class="say"><span class="role">–°—É–¥—å—è:</span> –û–±—ä—è–≤–ª—è—é —Å–ª—É—à–∞–Ω–∏–µ –æ—Ç–∫—Ä—ã—Ç—ã–º. –ü—Ä–µ–¥–º–µ—Ç —Å–ø–æ—Ä–∞: ¬´–ß—å—è –ø–æ–∑–∏—Ü–∏—è —Å–∏–ª—å–Ω–µ–µ ‚Äî –ª–æ–≥–∏–∫–∞ –ù—É—Ä–∞–ª–∏ –∏–ª–∏ –æ—á–∞—Ä–æ–≤–∞–Ω–∏–µ –ê–ª—É–∞?¬ª</div>
        <div class="say"><span class="role">–ù—É—Ä–∞–ª–∏:</span> –ì–æ—Ç–æ–≤ –≤—ã–¥–≤–∏–≥–∞—Ç—å –¥–æ–≤–æ–¥—ã. –ü—Ä–æ—à—É —Å–æ–±–ª—é–¥–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—É–∞–ª—å–Ω—ã–π –∫–æ—Ñ–µ-–ø–æ—Ä—è–¥–æ–∫.</div>
        <div class="say"><span class="role">–°—É–¥—å—è:</span> –ê–ª—É–∞, –≤–∞—à–∞ –∑–∞–¥–∞—á–∞ ‚Äî –≤—ã–±–∏—Ä–∞—Ç—å –ª—É—á—à–∏–π –∫–æ–Ω—Ç—Ä–∞—Ä–≥—É–º–µ–Ω—Ç –∏–∑ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã—Ö. –£–¥–∞—á–Ω—ã–π –æ—Ç–≤–µ—Ç –ø–æ–≤—ã—à–∞–µ—Ç —à–∫–∞–ª—É –ø–æ–±–µ–¥—ã.</div>
      </div>
      <div class="divider"></div>
      <p class="hint">–ù–∞–∂–º–∏—Ç–µ ¬´–ù–∞—á–∞—Ç—å —Å–ø–æ—Ä¬ª, —á—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –∫ —Ä–∞—É–Ω–¥–∞–º.</p>
    </div>
  </section>

  <!-- –°–¶–ï–ù–ê 2: —Ä–∞—É–Ω–¥—ã -->
  <section id="s2" class="scene">
    <div class="card">
      <div class="judge" id="roundBox">
        <!-- —Ä–∞—É–Ω–¥ –≤—Å—Ç–∞–≤–∏—Ç—Å—è —Å–∫—Ä–∏–ø—Ç–æ–º -->
      </div>
      <div class="divider"></div>
      <div class="row" style="justify-content:space-between">
        <button id="prevBtn" class="btn ghost" disabled>‚Üê –ù–∞–∑–∞–¥</button>
        <button id="nextBtn" class="btn" disabled>–î–∞–ª–µ–µ ‚Üí</button>
      </div>
    </div>
  </section>

  <!-- –°–¶–ï–ù–ê 3: —Ñ–∏–Ω–∞–ª -->
  <section id="s3" class="scene">
    <div class="card">
      <div class="log" id="finalLog">
        <div class="say"><span class="role">–°—É–¥—å—è:</span> –®–∫–∞–ª–∞ –¥–æ—Å—Ç–∏–≥–ª–∞ 100%. –î–µ–ª–æ —Ä–µ—à–µ–Ω–æ: <b>–ü–æ–±–µ–¥–∞ –ê–ª—É–∞</b> üéâ</div>
        <div class="say"><span class="role">–ù—É—Ä–∞–ª–∏:</span> –°–¥–∞—é—Å—å‚Ä¶ –∏ —Å —Ä–∞–¥–æ—Å—Ç—å—é –æ–≥–ª–∞—à–∞—é –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ.</div>
      </div>
      <div class="divider"></div>
      <div class="row" style="justify-content:flex-start">
        <button id="giftBtn" class="btn success">üéÅ –ü–æ–ª—É—á–∏—Ç—å –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ</button>
        <button id="replayBtn" class="btn ghost">‚Ü∫ –ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>
      </div>
      <div id="giftText" class="type"></div>
    </div>
  </section>
</div>

<!-- libs -->
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<script>
  // ===== –î–∞–Ω–Ω—ã–µ —Ä–∞—É–Ω–¥–æ–≤ =====
  const ROUNDS = [
    {
      nuraly: "–ú–æ–π –¥–æ–≤–æ–¥ ‚Ññ1: —Ü–∏—Ñ—Ä—ã –Ω–µ –≤—Ä—É—Ç. –õ–æ–≥–∏–∫–∞ ‚Äî –º–æ–π –≤–µ—Ä–Ω—ã–π —Å–æ—é–∑–Ω–∏–∫.",
      options: [
        { text: "–ú–æ—è —É–ª—ã–±–∫–∞ –ª—É—á–µ–∑–∞—Ä–Ω–∞ ‚Äî –ª–æ–≥–∏–∫–∞ –∑–¥–µ—Å—å –ø—Ä–æ—Å—Ç–æ –æ—Ç–¥—ã—Ö–∞–µ—Ç.", good: true, delta: 25 },
        { text: "–û–ø—Ä–æ–≤–µ—Ä–≥–Ω—É —Ü–∏—Ñ—Ä—ã‚Ä¶ –ø–∏—Ä–æ–∂–∫–æ–º? (–ù–µ –ª—É—á—à–∏–π –ø–ª–∞–Ω)", good: false, delta: 8 },
        { text: "–ê —Å—É–¥—å—è –≤ –∫—É—Ä—Å–µ, —á—Ç–æ —è –º–∏–ª–µ–µ –≤–∞—à–∏—Ö —Ñ–æ—Ä–º—É–ª?", good: false, delta: 12 },
      ],
      judgeGood: "–ê—Ä–≥—É–º–µ–Ω—Ç –ø—Ä–∏–Ω—è—Ç! –£—Ä–æ–≤–µ–Ω—å –æ—á–∞—Ä–æ–≤–∞–Ω–∏—è —Ä–∞—Å—Ç—ë—Ç.",
      judgeBad:  "–•–º‚Ä¶ –∑–∞–±–∞–≤–Ω–æ, –Ω–æ —Å–ª–∞–±–æ–≤–∞—Ç–æ. –ù–µ–º–Ω–æ–≥–æ –æ—á–∫–æ–≤ –∑–∞ –∫—Ä–µ–∞—Ç–∏–≤."
    },
    {
      nuraly: "–ú–æ–π –¥–æ–≤–æ–¥ ‚Ññ2: —Ñ–∞–∫—Ç—ã —É–ø—Ä—è–º—ã ‚Äî –¥–µ–¥–ª–∞–π–Ω—ã –Ω–µ –∂–¥—É—Ç.",
      options: [
        { text: "–°—á–∞—Å—Ç—å–µ –≤–∞–∂–Ω–µ–µ –¥–µ–¥–ª–∞–π–Ω–æ–≤. –°–µ–≥–æ–¥–Ω—è –ø—Ä–∞–∑–¥–Ω–∏–∫ ‚Äî —Ñ–∞–∫—Ç—ã –ø–æ–¥–æ–∂–¥—É—Ç.", good: true, delta: 25 },
        { text: "–£–ø—Ä—è–º—Å—Ç–≤–æ —Ñ–∞–∫—Ç–æ–≤ –ª–µ—á–∏—Ç—Å—è —Ç–æ—Ä—Ç–æ–º. –ú–Ω–æ–≥–æ —Ç–æ—Ä—Ç–æ–º.", good: false, delta: 10 },
        { text: "–ü—Ä–æ—à—É –ø—Ä–∏–æ–±—â–∏—Ç—å –∫–æ—Ñ–µ –∫ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º –¥–µ–ª–∞.", good: false, delta: 12 },
      ],
      judgeGood: "–ü—Ä–∏–Ω—è—Ç–æ! –£ –ø—Ä–∞–∑–¥–Ω–∏–∫–∞ –µ—Å—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—É–∞–ª—å–Ω—ã–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç.",
      judgeBad:  "–°–∏–º–ø–∞—Ç–∏—á–Ω–æ, –Ω–æ –Ω–µ—É–±–µ–¥–∏—Ç–µ–ª—å–Ω–æ. +—á—É—Ç—å-—á—É—Ç—å –∑–∞ —é–º–æ—Ä."
    },
    {
      nuraly: "–ú–æ–π –¥–æ–≤–æ–¥ ‚Ññ3: —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç‚Ä¶",
      options: [
        { text: "–ú–æ—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ—Å—Ç–∞—è: –ª—é–¥–∏ —Ä—è–¥–æ–º —Å–æ –º–Ω–æ–π —á–∞—â–µ —É–ª—ã–±–∞—é—Ç—Å—è ‚ò∫Ô∏è", good: true, delta: 25 },
        { text: "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ ‚Äî —ç—Ç–æ –∫–æ–≥–¥–∞ –º–Ω–æ–≥–æ —Ü–∏—Ñ—Ä –∏ –º–∞–ª–æ —Å—á–∞—Å—Ç—å—è.", good: false, delta: 10 },
        { text: "–ï—Å–ª–∏ —á—Ç–æ ‚Äî —É –º–µ–Ω—è –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ —É–±–µ–¥–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ—Ç–∏–∫.", good: false, delta: 12 },
      ],
      judgeGood: "–≠—Ç–æ —Å–µ—Ä—å—ë–∑–Ω–æ. –ü–æ–∫–∞–∑–∞—Ç–µ–ª—å —É–ª—ã–±–∞–µ–º–æ—Å—Ç–∏ –Ω–∏–∫—Ç–æ –Ω–µ –æ—Ç–º–µ–Ω—è–ª.",
      judgeBad:  "–ú–∏–ª–æ, –Ω–æ –∫–æ—Ç–∏–∫ ‚Äî –Ω–µ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç. +–Ω–µ–º–Ω–æ–≥–æ."
    },
    {
      nuraly: "–ú–æ–π –¥–æ–≤–æ–¥ ‚Ññ4: –∏—Ç–æ–≥–æ–≤–∞—è –º–æ–¥–µ–ª—å –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç 99.9% –º–æ–µ–π –ø—Ä–∞–≤–æ—Ç—ã.",
      options: [
        { text: "–û—Å—Ç–∞–≤—à–∏–µ—Å—è 0.1% ‚Äî —ç—Ç–æ –º–æ—è –º–∞–≥–∏—è. –ò —Å–µ–≥–æ–¥–Ω—è ‚Äî –º–æ–π –¥–µ–Ω—å.", good: true, delta: 25 },
        { text: "–ü—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞—é –∫–æ—Ñ–µ-–±—Ä–µ–π–∫ ‚Äî –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å.", good: false, delta: 10 },
        { text: "–í—ã –∫–æ–≥–¥–∞-–Ω–∏–±—É–¥—å —Å–ø–æ—Ä–∏–ª–∏ —Å –º–æ–∏–º–∏ —è–º–æ—á–∫–∞–º–∏ –Ω–∞ —â–µ–∫–∞—Ö?", good: false, delta: 12 },
      ],
      judgeGood: "–ù–µ–æ—Å–ø–æ—Ä–∏–º–æ. –ú–∞–≥–∏—è 0.1% –∑–∞–∫—Ä—ã–≤–∞–µ—Ç —Å–ø–æ—Ä.",
      judgeBad:  "–ó–∞–±–∞–≤–Ω–æ, –Ω–æ –º–∞–ª–æ –æ—Å–Ω–æ–≤–∞–Ω–∏–π. –ù–µ–º–Ω–æ–≥–æ –±–∞–ª–ª–æ–≤ ‚Äî –∑–∞ –æ—á–∞—Ä–æ–≤–∞–Ω–∏–µ."
    }
  ];

  // ===== –°–æ—Å—Ç–æ—è–Ω–∏–µ =====
  let roundIndex = 0;
  let progress = 0;
  let roundAnswered = false;
  let bribeCooldown = false;

  // ===== DOM =====
  const s1 = document.getElementById('s1');
  const s2 = document.getElementById('s2');
  const s3 = document.getElementById('s3');
  const bar = document.getElementById('bar');
  const startBtn = document.getElementById('startBtn');
  const bribeBtn = document.getElementById('bribeBtn');
  const roundBox = document.getElementById('roundBox');
  const prevBtn = document.getElementById('prevBtn');
  const nextBtn = document.getElementById('nextBtn');
  const giftBtn = document.getElementById('giftBtn');
  const replayBtn = document.getElementById('replayBtn');
  const giftText = document.getElementById('giftText');

  // ===== –ù–∞–≤–∏–≥–∞—Ü–∏—è =====
  function show(el){ [s1,s2,s3].forEach(x=>x.classList.remove('active')); el.classList.add('active'); }
  function setProgress(p){ progress = Math.max(0, Math.min(100, p)); bar.style.width = progress + '%'; if(progress<100) bribeBtn.style.display='inline-block'; }
  function toast(msg){
    const el = document.createElement('div'); el.className='toast'; el.textContent=msg; document.body.appendChild(el);
    requestAnimationFrame(()=>{ el.style.transition='opacity .2s'; el.style.opacity='1'; });
    setTimeout(()=>{ el.style.opacity='0'; setTimeout(()=>el.remove(), 200); }, 1800);
  }

  startBtn.addEventListener('click', ()=>{
    show(s2);
    setProgress(5);
    renderRound();
  });

  prevBtn.addEventListener('click', ()=>{
    if(roundIndex>0){ roundIndex--; renderRound(true); }
  });

  nextBtn.addEventListener('click', ()=>{
    if(progress>=100){ finish(); return; }
    if(roundIndex < ROUNDS.length-1){ roundIndex++; renderRound(); }
    else {
      // –≤—Å–µ —Ä–∞—É–Ω–¥—ã —Å—ã–≥—Ä–∞–Ω—ã ‚Äî –µ—Å–ª–∏ –µ—â—ë –Ω–µ—Ç 100%, –º—è–≥–∫–æ –ø–æ–¥—Ç–æ–ª–∫–Ω—ë–º –∫ —Ñ–∏–Ω–∞–ª—É
      if(progress>=90){ setProgress(100); finish(); }
      else { toast("–ï—â—ë –Ω–µ–º–Ω–æ–≥–æ –æ—á–∫–æ–≤ ‚Äî –∏ –ø–æ–±–µ–¥–∞ –±—É–¥–µ—Ç –∑–∞ –ê–ª—É–∞!"); }
    }
  });

  bribeBtn.addEventListener('click', ()=>{
    if(bribeCooldown) return;
    bribeCooldown = true;
    setTimeout(()=> bribeCooldown=false, 3000);
    setProgress(progress + 20);
    toast("–°—É–¥—å—è: ¬´–•–º‚Ä¶ –∫–æ—Ñ–µ —É–±–µ–¥–∏—Ç–µ–ª–µ–Ω. –ü–µ—Ä–µ—Å–º–∞—Ç—Ä–∏–≤–∞—é –æ—Ü–µ–Ω–∫—É –≤ –ø–æ–ª—å–∑—É –ê–ª—É–∞ üòå¬ª");
    if(progress>=100) finish();
  });

  // ===== –†–µ–Ω–¥–µ—Ä —Ä–∞—É–Ω–¥–∞ =====
  function renderRound(backward=false){
    const r = ROUNDS[roundIndex];
    roundAnswered = false;
    nextBtn.disabled = true;
    prevBtn.disabled = (roundIndex===0);

    roundBox.innerHTML = `
      <div class="say"><span class="role">–ù—É—Ä–∞–ª–∏:</span> ${r.nuraly}</div>
      <div class="divider"></div>
      <div class="hint">–ê–ª—É–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –æ—Ç–≤–µ—Ç:</div>
      <div class="choices" id="choices"></div>
    `;
    const choices = document.getElementById('choices');
    r.options.forEach((opt, i)=>{
      const btn = document.createElement('button');
      btn.className='choice';
      btn.innerHTML = `<b>${opt.text}</b>`;
      btn.addEventListener('click', ()=>{
        if(roundAnswered) return;
        roundAnswered = true;
        btn.classList.add(opt.good?'good':'bad');

        // —Ä–µ–∞–∫—Ü–∏—è —Å—É–¥—å–∏ + –æ—á–∫–∏
        if(opt.good){
          setProgress(progress + opt.delta);
          toast(r.judgeGood);
          ding(true);
        } else {
          setProgress(progress + opt.delta);
          toast(r.judgeBad);
          ding(false);
        }
        nextBtn.disabled = false;

        if(progress>=100){ finish(); }
      });
      choices.appendChild(btn);
    });

    // –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –Ω–∞–∑–∞–¥ ‚Äî –Ω–µ–±–æ–ª—å—à–æ–π –æ—Ç–∫–∞—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ (–º—è–≥–∫–∏–π)
    if(backward){ setProgress(progress - 5); }
  }

  // ===== –§–∏–Ω–∞–ª =====
  function finish(){
    show(s3);
    fireConfetti();
    setTimeout(()=>fireConfetti(), 400);
    setTimeout(()=>fireConfetti(), 900);
  }

  giftBtn.addEventListener('click', async ()=>{
    giftBtn.disabled = true;
    floatingHearts();
    await typeWriter(giftText,
`–ê–ª—É–∞, –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ –ø—Ä–∏–∑–Ω–∞—é —Ç–≤–æ—é –ü–æ–±–µ–¥—É –≤ —Å–ø–æ—Ä–µ ‚ù§Ô∏è

‚Ä¢ –¢–≤–æ—è —É–ª—ã–±–∫–∞ —Å–∏–ª—å–Ω–µ–µ –ª—é–±—ã—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤.
‚Ä¢ –°—á–∞—Å—Ç—å–µ ‚Äî –∫ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–º—É –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—é.
‚Ä¢ –ö–æ—Ñ–µ ‚Äî –ø–æ –ø–µ—Ä–≤–æ–º—É —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é.
‚Ä¢ –£–ª—ã–±–∫–∏ –∏ –æ–±—ä—è—Ç–∏—è ‚Äî –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π.

–°–ø–∞—Å–∏–±–æ, —á—Ç–æ —Ç—ã –µ—Å—Ç—å.
‚Äî –ù—É—Ä–∞–ª–∏`);
    setProgress(100);
  });

  replayBtn.addEventListener('click', ()=>{
    // —Å–±—Ä–æ—Å
    roundIndex = 0; setProgress(0); giftBtn.disabled = false; giftText.textContent = '';
    show(s1);
  });

  // ===== –≠—Ñ—Ñ–µ–∫—Ç—ã =====
  function fireConfetti(){
    confetti({ particleCount: 90, spread: 70, startVelocity:45, origin:{ y: 0.7 } });
  }
  function floatingHearts(){
    const emojis=['üíô','üíõ','üíñ','‚ú®','üí´','üíô','üíõ','üíñ'];
    for(let i=0;i<24;i++){
      const s=document.createElement('div');
      s.className='heart'; s.textContent=emojis[i%emojis.length];
      s.style.left=(Math.random()*92+4)+'vw';
      s.style.animationDuration=(4+Math.random()*3)+'s';
      s.style.fontSize=(18+Math.random()*14)+'px';
      document.body.appendChild(s);
      setTimeout(()=>s.remove(),7000);
    }
  }
  async function typeWriter(node, text){
    node.textContent='';
    for(let i=0;i<text.length;i++){
      node.textContent += text[i];
      await new Promise(r=>setTimeout(r, 18));
    }
  }
  // –º–∞–ª–µ–Ω—å–∫–∏–π –∑–≤—É–∫–æ–≤–æ–π —Ñ–∏–¥–±–µ–∫ —á–µ—Ä–µ–∑ WebAudio (–±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö —Ñ–∞–π–ª–æ–≤)
  function ding(success=true){
    try{
      const ctx = new (window.AudioContext||window.webkitAudioContext)();
      const o = ctx.createOscillator(); const g = ctx.createGain();
      o.type = success ? 'triangle':'sawtooth';
      o.frequency.value = success ? 820 : 320;
      g.gain.value = 0.00001; g.gain.exponentialRampToValueAtTime(0.00001, ctx.currentTime);
      o.connect(g); g.connect(ctx.destination);
      o.start();
      g.gain.exponentialRampToValueAtTime(0.2, ctx.currentTime+0.01);
      g.gain.exponentialRampToValueAtTime(0.0001, ctx.currentTime+0.25);
      o.stop(ctx.currentTime+0.3);
    }catch(e){ /* —Ç–∏—Ö–∏–π —Ñ–æ–ª–±—ç–∫ */ }
  }
</script>
</body>
</html>
